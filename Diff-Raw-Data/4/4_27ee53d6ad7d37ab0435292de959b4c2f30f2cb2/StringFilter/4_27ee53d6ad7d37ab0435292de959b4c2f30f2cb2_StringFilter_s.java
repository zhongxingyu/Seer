 /*
  * StringFilter.java
  *
  * Created on 12.10.2010, 09:56:58
  */
 package edacc.filter;
 
 import java.awt.event.KeyListener;
 
 /**
  * This class implements a filter for strings by using regular expressions.
  * @author simon
  */
 public class StringFilter extends javax.swing.JPanel implements FilterInterface {
 
     private String regExp;
 
     /** Creates new form StringFilter */
     public StringFilter(String name) {
         initComponents();
         lblName.setText(name + " (RegExp)");
         regExp = "";
     }
 
     /** This method is called from within the constructor to
      * initialize the form.
      * WARNING: Do NOT modify this code. The content of this method is
      * always regenerated by the Form Editor.
      */
     @SuppressWarnings("unchecked")
     // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
     private void initComponents() {
 
         lblName = new javax.swing.JLabel();
         txtRegexp = new javax.swing.JTextField();
 
         setName("Form"); // NOI18N
 
         org.jdesktop.application.ResourceMap resourceMap = org.jdesktop.application.Application.getInstance(edacc.EDACCApp.class).getContext().getResourceMap(StringFilter.class);
         lblName.setText(resourceMap.getString("lblName.text")); // NOI18N
         lblName.setName("lblName"); // NOI18N
 
         txtRegexp.setText(resourceMap.getString("txtRegexp.text")); // NOI18N
         txtRegexp.setName("txtRegexp"); // NOI18N
         txtRegexp.addKeyListener(new java.awt.event.KeyAdapter() {
             public void keyReleased(java.awt.event.KeyEvent evt) {
                 txtRegexpKeyReleased(evt);
             }
         });
 
         javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
         this.setLayout(layout);
         layout.setHorizontalGroup(
             layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
             .addGroup(layout.createSequentialGroup()
                 .addComponent(lblName)
                 .addGap(14, 14, 14)
                 .addComponent(txtRegexp, javax.swing.GroupLayout.DEFAULT_SIZE, 100, Short.MAX_VALUE))
         );
         layout.setVerticalGroup(
             layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
             .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                 .addComponent(txtRegexp, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                 .addComponent(lblName))
         );
     }// </editor-fold>//GEN-END:initComponents
 
     private void txtRegexpKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtRegexpKeyReleased
         for (KeyListener listener : getKeyListeners()) {
             listener.keyReleased(evt);
         }
     }//GEN-LAST:event_txtRegexpKeyReleased
 
     @Override
     public boolean include(Object value) {
         String val;
         if (value instanceof String) {
             val = (String) value;
         } else {
            val = value.toString();
         }
         try {
             return val.matches(regExp);
         } catch (Exception e) {
             return false;
         }
     }
 
     public static boolean accept(Class<?> clazz) {
         return clazz == String.class;
     }
     // Variables declaration - do not modify//GEN-BEGIN:variables
     private javax.swing.JLabel lblName;
     private javax.swing.JTextField txtRegexp;
     // End of variables declaration//GEN-END:variables
 
     @Override
     public void apply() {
         regExp = txtRegexp.getText();
     }
 
     @Override
     public void undo() {
         txtRegexp.setText(regExp);
     }
 }
