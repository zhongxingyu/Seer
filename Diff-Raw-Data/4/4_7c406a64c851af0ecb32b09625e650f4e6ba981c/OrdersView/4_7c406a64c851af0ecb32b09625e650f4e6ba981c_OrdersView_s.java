package com.sk.admin.web.view;import java.util.ArrayList;import java.util.List;import javax.faces.bean.ManagedBean;import javax.faces.bean.ManagedProperty;import javax.faces.bean.ViewScoped;import javax.faces.model.SelectItem;import com.sk.domain.Order;import com.sk.domain.OrderStatus;import com.sk.service.OrderService;import com.sk.service.payment.VPOSResponse;@ViewScoped@ManagedBeanpublic class OrdersView extends BaseView {	private static final long serialVersionUID = -3028675164123618741L;		private Order selectedOrder;		@ManagedProperty("#{orderService}")	private transient OrderService orderService;	public void reject(Order order){		changeOrderStatus(order, OrderStatus.REJECTED);	}		public void complete(Order order){		changeOrderStatus(order, OrderStatus.COMPLETED);	}		public void approveRefundRequest(Order order){		VPOSResponse response = orderService.approveRefundRequest(order);		if( response.isSuccessful()){			facesHelper.addInfoMessage("It is successfully refunded");		}else{			facesHelper.addErrorMessage("The refund operation failed due to error: " + response.getDetailMessage());		}	}		private void changeOrderStatus(Order order, OrderStatus status){		order.setOrderStatus(status);		orderService.save(order);	}		public void setOrderService(OrderService orderService) {		this.orderService = orderService;	}	public List<Order> getAll() {		return orderService.getAll();	}	public Order getSelectedOrder() {		return selectedOrder;	}	public void setSelectedOrder(Order selectedOrder) {		this.selectedOrder = selectedOrder;	}	public List<SelectItem> getOrderStatus() {		List<SelectItem> orderStatusList = new ArrayList<SelectItem>();		orderStatusList.add(new SelectItem("", "Select"));				List<SelectItem> fecthedOrderStatuses = facesHelper.toSelectItemListFromEnum(OrderStatus.class);		orderStatusList.addAll(fecthedOrderStatuses);				return orderStatusList;	}		}
