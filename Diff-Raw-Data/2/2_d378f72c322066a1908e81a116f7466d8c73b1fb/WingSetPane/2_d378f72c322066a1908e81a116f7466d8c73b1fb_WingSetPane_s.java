 /*
  * $Id$
  * Copyright 2000,2005 wingS development team.
  *
  * This file is part of wingS (http://www.j-wings.org).
  *
  * wingS is free software; you can redistribute it and/or modify
  * it under the terms of the GNU Lesser General Public License
  * as published by the Free Software Foundation; either version 2.1
  * of the License, or (at your option) any later version.
  *
  * Please see COPYING for the complete licence.
  */
 package wingset;
 
 
 import org.wings.*;
 import org.wings.event.SComponentAdapter;
 import org.wings.event.SComponentEvent;
 import org.wings.session.SessionManager;
 import org.apache.commons.logging.Log;
 import org.apache.commons.logging.LogFactory;
 
 /**
  * A basic WingSet Pane, which implements some often needed functions.
  *
  * @author <a href="mailto:haaf@mercatis.de">Armin Haaf</a>
  * @version $Revision$
  */
 abstract public class WingSetPane extends SPanel implements SConstants {
     protected final static transient Log log = LogFactory.getLog(WingSetPane.class);
     private static final SResourceIcon SOURCE_LABEL_ICON = new SResourceIcon("org/wings/icons/File.gif");
     private boolean initialized = false;
 
     public WingSetPane() {
         setLayout(createResourceTemplate("/templates/ContentLayout.thtml"));
 
        SAnchor anchor = new SAnchor("/wingset/" + getClass().getName().substring(getClass().getName().indexOf('.') + 1) + ".java");
         anchor.setTarget("sourceWindow");
         anchor.add(new SLabel("view java source code", SOURCE_LABEL_ICON));
         add(anchor, "viewSource");
 
         addComponentListener(new SComponentAdapter() {
             public void componentShown(SComponentEvent e) {
                 if (!initialized) {
                     SComponent exampleComponent = createExample();
                     exampleComponent.setHorizontalAlignment(SComponent.CENTER);
                     add(exampleComponent, "content"); // content generated by example
                     initialized = true;
                 }
             }
         });
     }
 
     /**
      * Override this.
      */
     protected abstract SComponent createExample();
 
     protected static SLayoutManager createResourceTemplate(String name) {
         try {
             return new STemplateLayout(SessionManager.getSession().getServletContext().getRealPath(name));
         } catch (Exception ex) {
             log.error("Ex",ex);
         }
         return null;
     }
 }
