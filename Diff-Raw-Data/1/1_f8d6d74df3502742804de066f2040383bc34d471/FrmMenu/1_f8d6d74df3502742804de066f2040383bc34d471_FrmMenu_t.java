 package restaurante.UI.Forms;
 
 import java.awt.event.MouseEvent;
 import java.util.ArrayList;
 import java.util.List;
 import java.util.logging.Level;
 import java.util.logging.Logger;
 import restaurante.Beans.ProductsFromMenu;
 import restaurante.Controller.MenuController;
 import restaurante.UI.MyTableModel;
 import restaurante.Beans.Menu;
 import restaurante.Beans.Products;
 import restaurante.Controller.BeanValidationException;
 import restaurante.Controller.ProductsController;
 import restaurante.UI.FrmMain;
 import restaurante.UI.Searchs.FrmMenuSearch;
 import restaurante.UI.Searchs.FrmProductsSearch;
 import restaurante.Utils;
 
 /**
  *
  * @author Matheus
  */
 public class FrmMenu extends FrmNavToolbar<Menu> {
     MenuController controller = new MenuController();
     /**
      * Creates new form FrmMenu
      */
     public FrmMenu() {
         initComponents();
         initDefaultProperties();
         fillTable(new Menu());
         resetList();
         grid.setColumnClickListener(grid.new ColumnClickListener() {
             @Override
             public void onTableHeaderClick(MouseEvent e, int columnIndex) {
                 gridSearch(columnIndex);
             }
         });
     }
     
     /**
      * This method is called from within the constructor to initialize the form.
      * WARNING: Do NOT modify this code. The content of this method is always
      * regenerated by the Form Editor.
      */
     @SuppressWarnings("unchecked")
     // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
     private void initComponents() {
 
         jScrollPane1 = new javax.swing.JScrollPane();
         jTable1 = new javax.swing.JTable();
         jPanel1 = new javax.swing.JPanel();
         jLabel9 = new javax.swing.JLabel();
         txtName = new javax.swing.JTextField();
         jLabel1 = new javax.swing.JLabel();
         jLabel3 = new javax.swing.JLabel();
         txtAvgTimePrepare = new javax.swing.JTextField();
         txtPrice = new javax.swing.JFormattedTextField();
         jLabel2 = new javax.swing.JLabel();
         txtAmountPeopleServes = new javax.swing.JTextField();
         jLabel10 = new javax.swing.JLabel();
         txtId = new javax.swing.JTextField();
         jScrollPane3 = new javax.swing.JScrollPane();
         grid = new restaurante.UI.CustomComponents.JClickableHeaderTable();
         jLabel5 = new javax.swing.JLabel();
 
         jTable1.setModel(new javax.swing.table.DefaultTableModel(
             new Object [][] {
                 {null, null, null, null},
                 {null, null, null, null},
                 {null, null, null, null},
                 {null, null, null, null}
             },
             new String [] {
                 "Title 1", "Title 2", "Title 3", "Title 4"
             }
         ));
         jScrollPane1.setViewportView(jTable1);
 
         setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
         setTitle("Cardápio");
         setMinimumSize(new java.awt.Dimension(477, 375));
 
         jPanel1.setBorder(javax.swing.BorderFactory.createEtchedBorder());
 
         jLabel9.setFont(jLabel9.getFont().deriveFont((jLabel9.getFont().getStyle() & ~java.awt.Font.ITALIC) & ~java.awt.Font.BOLD, 12));
         jLabel9.setText("Nome");
 
         txtName.addActionListener(new java.awt.event.ActionListener() {
             public void actionPerformed(java.awt.event.ActionEvent evt) {
                 txtNameActionPerformed(evt);
             }
         });
 
         jLabel1.setFont(jLabel1.getFont().deriveFont((jLabel1.getFont().getStyle() & ~java.awt.Font.ITALIC) & ~java.awt.Font.BOLD, 12));
         jLabel1.setText("Preço ");
 
         jLabel3.setFont(jLabel3.getFont().deriveFont((jLabel3.getFont().getStyle() & ~java.awt.Font.ITALIC) & ~java.awt.Font.BOLD, 12));
         jLabel3.setText("Tempo médio preparo");
 
         txtAvgTimePrepare.setHorizontalAlignment(javax.swing.JTextField.RIGHT);
         txtAvgTimePrepare.addActionListener(new java.awt.event.ActionListener() {
             public void actionPerformed(java.awt.event.ActionEvent evt) {
                 txtAvgTimePrepareActionPerformed(evt);
             }
         });
 
         try {
             txtPrice.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.MaskFormatter("R$ ##,##")));
         } catch (java.text.ParseException ex) {
             ex.printStackTrace();
         }
         txtPrice.setHorizontalAlignment(javax.swing.JTextField.RIGHT);
 
         jLabel2.setFont(jLabel2.getFont().deriveFont((jLabel2.getFont().getStyle() & ~java.awt.Font.ITALIC) & ~java.awt.Font.BOLD, 12));
         jLabel2.setText("Quantidade pessoas serve");
 
         txtAmountPeopleServes.setHorizontalAlignment(javax.swing.JTextField.RIGHT);
         txtAmountPeopleServes.addActionListener(new java.awt.event.ActionListener() {
             public void actionPerformed(java.awt.event.ActionEvent evt) {
                 txtAmountPeopleServesActionPerformed(evt);
             }
         });
 
         jLabel10.setFont(jLabel10.getFont().deriveFont((jLabel10.getFont().getStyle() & ~java.awt.Font.ITALIC) & ~java.awt.Font.BOLD, 12));
         jLabel10.setText("ID");
 
         txtId.setHorizontalAlignment(javax.swing.JTextField.RIGHT);
         txtId.setEnabled(false);
         txtId.addActionListener(new java.awt.event.ActionListener() {
             public void actionPerformed(java.awt.event.ActionEvent evt) {
                 txtIdActionPerformed(evt);
             }
         });
 
         grid.setModel(new javax.swing.table.DefaultTableModel(
             new Object [][] {
                 {null, null}
             },
             new String [] {
                 "Cód.Prod", "Descrição dos Produtos"
             }
         ) {
             Class[] types = new Class [] {
                 java.lang.Integer.class, java.lang.String.class
             };
 
             public Class getColumnClass(int columnIndex) {
                 return types [columnIndex];
             }
         });
         grid.setFont(grid.getFont().deriveFont((grid.getFont().getStyle() & ~java.awt.Font.ITALIC) & ~java.awt.Font.BOLD, 11));
         jScrollPane3.setViewportView(grid);
         grid.getColumnModel().getColumn(0).setMinWidth(80);
         grid.getColumnModel().getColumn(0).setPreferredWidth(80);
         grid.getColumnModel().getColumn(0).setMaxWidth(80);
 
         jLabel5.setFont(new java.awt.Font("Tahoma", 1, 11));
         jLabel5.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
         jLabel5.setText("Produtos Usados");
 
         javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
         jPanel1.setLayout(jPanel1Layout);
         jPanel1Layout.setHorizontalGroup(
             jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
             .addGroup(jPanel1Layout.createSequentialGroup()
                 .addContainerGap()
                 .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                     .addComponent(jScrollPane3, javax.swing.GroupLayout.PREFERRED_SIZE, 0, Short.MAX_VALUE)
                     .addComponent(jLabel5, javax.swing.GroupLayout.DEFAULT_SIZE, 433, Short.MAX_VALUE)
                     .addGroup(jPanel1Layout.createSequentialGroup()
                         .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                             .addComponent(jLabel2)
                             .addComponent(jLabel3))
                         .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                         .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                             .addComponent(txtAvgTimePrepare, javax.swing.GroupLayout.Alignment.LEADING)
                             .addComponent(txtAmountPeopleServes, javax.swing.GroupLayout.PREFERRED_SIZE, 115, javax.swing.GroupLayout.PREFERRED_SIZE))
                         .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 30, Short.MAX_VALUE)
                         .addComponent(jLabel1)
                         .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                         .addComponent(txtPrice, javax.swing.GroupLayout.PREFERRED_SIZE, 103, javax.swing.GroupLayout.PREFERRED_SIZE))
                     .addGroup(jPanel1Layout.createSequentialGroup()
                         .addComponent(jLabel10)
                         .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                         .addComponent(txtId, javax.swing.GroupLayout.PREFERRED_SIZE, 51, javax.swing.GroupLayout.PREFERRED_SIZE)
                         .addGap(0, 340, Short.MAX_VALUE))
                     .addGroup(jPanel1Layout.createSequentialGroup()
                         .addComponent(jLabel9)
                         .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                         .addComponent(txtName, javax.swing.GroupLayout.DEFAULT_SIZE, 391, Short.MAX_VALUE)))
                 .addContainerGap())
         );
 
         jPanel1Layout.linkSize(javax.swing.SwingConstants.HORIZONTAL, new java.awt.Component[] {jLabel10, jLabel9});
 
         jPanel1Layout.linkSize(javax.swing.SwingConstants.HORIZONTAL, new java.awt.Component[] {jLabel2, jLabel3});
 
         jPanel1Layout.setVerticalGroup(
             jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
             .addGroup(jPanel1Layout.createSequentialGroup()
                 .addContainerGap()
                 .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                     .addComponent(jLabel10)
                     .addComponent(txtId, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                 .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                 .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                     .addComponent(jLabel9)
                     .addComponent(txtName, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                 .addGap(18, 18, Short.MAX_VALUE)
                 .addComponent(jLabel5)
                 .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                 .addComponent(jScrollPane3, javax.swing.GroupLayout.PREFERRED_SIZE, 122, javax.swing.GroupLayout.PREFERRED_SIZE)
                 .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                 .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                     .addComponent(txtPrice, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                     .addGroup(jPanel1Layout.createSequentialGroup()
                         .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                             .addComponent(jLabel3)
                             .addComponent(txtAvgTimePrepare, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                             .addComponent(jLabel1))
                         .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                         .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                             .addComponent(jLabel2)
                             .addComponent(txtAmountPeopleServes, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))))
                 .addContainerGap())
         );
 
         javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
         getContentPane().setLayout(layout);
         layout.setHorizontalGroup(
             layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
             .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                 .addContainerGap()
                 .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                 .addContainerGap())
         );
         layout.setVerticalGroup(
             layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
             .addGroup(layout.createSequentialGroup()
                 .addGap(45, 45, 45)
                 .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                 .addContainerGap())
         );
 
         pack();
     }// </editor-fold>//GEN-END:initComponents
 
     private void txtNameActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtNameActionPerformed
         // TODO add your handling code here:
     }//GEN-LAST:event_txtNameActionPerformed
 
     private void txtAvgTimePrepareActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtAvgTimePrepareActionPerformed
         // TODO add your handling code here:
     }//GEN-LAST:event_txtAvgTimePrepareActionPerformed
 
     private void txtAmountPeopleServesActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtAmountPeopleServesActionPerformed
         // TODO add your handling code here:
     }//GEN-LAST:event_txtAmountPeopleServesActionPerformed
 
     private void txtIdActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtIdActionPerformed
         // TODO add your handling code here:
     }//GEN-LAST:event_txtIdActionPerformed
 
     /**
      * @param args the command line arguments
      */
     public static void main(String args[]) {
         /* Set the Nimbus look and feel */
         //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
         /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
          * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
          */
         try {
             for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                 if ("Nimbus".equals(info.getName())) {
                     javax.swing.UIManager.setLookAndFeel(info.getClassName());
                     break;
                 }
             }
         } catch (ClassNotFoundException ex) {
             java.util.logging.Logger.getLogger(FrmMenu.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
         } catch (InstantiationException ex) {
             java.util.logging.Logger.getLogger(FrmMenu.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
         } catch (IllegalAccessException ex) {
             java.util.logging.Logger.getLogger(FrmMenu.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
         } catch (javax.swing.UnsupportedLookAndFeelException ex) {
             java.util.logging.Logger.getLogger(FrmMenu.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
         }
         //</editor-fold>
 
         /* Create and display the form */
         java.awt.EventQueue.invokeLater(new Runnable() {
             public void run() {
                 new FrmMenu().setVisible(true);
             }
         });
     }
     // Variables declaration - do not modify//GEN-BEGIN:variables
     private restaurante.UI.CustomComponents.JClickableHeaderTable grid;
     private javax.swing.JLabel jLabel1;
     private javax.swing.JLabel jLabel10;
     private javax.swing.JLabel jLabel2;
     private javax.swing.JLabel jLabel3;
     private javax.swing.JLabel jLabel5;
     private javax.swing.JLabel jLabel9;
     private javax.swing.JPanel jPanel1;
     private javax.swing.JScrollPane jScrollPane1;
     private javax.swing.JScrollPane jScrollPane3;
     private javax.swing.JTable jTable1;
     private javax.swing.JTextField txtAmountPeopleServes;
     private javax.swing.JTextField txtAvgTimePrepare;
     private javax.swing.JTextField txtId;
     private javax.swing.JTextField txtName;
     private javax.swing.JFormattedTextField txtPrice;
     // End of variables declaration//GEN-END:variables
 
     @Override
     public boolean saveRegister() {
         try {
             int id = 0;
             id = !txtId.getText().equals("") ? Integer.valueOf(txtId.getText()) : 0;
             
             ProductsFromMenu[] products = ((MyTableModel<ProductsFromMenu>)grid.getModel()).getArray();
             
             id = controller.saveRecord(id, txtName.getText(), 
                     Utils.currencyStringToDouble(txtPrice.getText()), 
                     Double.valueOf(txtAvgTimePrepare.getText()), 
                     Integer.valueOf(txtAmountPeopleServes.getText()), 
                     products, FrmMain.currentBranch.getId());
             txtId.setText(String.valueOf(id));
             Utils.showInfoMessage(this, SAVE_SUCCESS);
             resetList();
             return true;
         } catch (BeanValidationException e) {
             Utils.showErrorMessage(this, e.getMessage());
         } catch (Exception e) {
             Logger.getLogger(FrmCustomers.class.getName()).log(Level.SEVERE, null, e);
             Utils.showErrorMessage(this, SAVE_ERROR);
         }
         return false;
     }
 
     @Override
     public boolean deleteRegister() {
         if(!Utils.showQuestionMessage(this, DELETE_CONFIRMATION)) { return false; }
         try {
             controller.delete(Integer.valueOf(txtId.getText()));
             newRegister();
             resetList();
             return true;
         } catch (Exception ex) {
             Logger.getLogger(FrmCustomers.class.getName()).log(Level.SEVERE, null, ex);
             Utils.showErrorMessage(this, DELETE_ERROR);
             return false;
         }
     }
 
     @Override
     public void getValues(Menu register) {
         txtId.setText(String.valueOf(register.getId()));
         txtName.setText(register.getName());
         txtPrice.setText(Utils.doubleToCurrencyString(register.getPrice()));
         txtAvgTimePrepare.setText(String.valueOf(register.getAvgTimePrepare()));
         txtAmountPeopleServes.setText(String.valueOf(register.getAmountPeopleServes()));
         fillTable(register);
        controller.setNewRecord(false);
     }
 
     @Override
     public final void resetList() {
         try {
             this.setList(controller.list());
         } catch (Exception ex) {
             Logger.getLogger(FrmCustomers.class.getName()).log(Level.SEVERE, null, ex);
         }
         newRegister();
     }
 
     @Override
     public void searchRegister() {
         FrmMenuSearch search = new FrmMenuSearch();
         search.show();
         try {
             getValues(controller.findById((Integer)search.getReturnId()));
         } catch (Exception ex) {
             Logger.getLogger(FrmCustomers.class.getName()).log(Level.SEVERE, null, ex);
         }
     }
 
     @Override
     /**
      * Call this method after Fill JTable
      */
     public void setNewRegisterInController() {
         controller.setNewRecord(true);
         try {
             ((MyTableModel)this.grid.getModel()).clear();
         } catch (Exception ex) {
             Logger.getLogger(FrmMenu.class.getName()).log(Level.SEVERE, null, ex);
             // Clearing TableModel before Filling JTable
         }
     }
     
     private void fillTable(Menu menu) {
         this.grid.setModel(getTableModel(menu));
     }
         
     private MyTableModel getTableModel(Menu menu) {
         try {
             /*Cria um ArrayList a partir de um array comum... precisa especificar
             qual o tipo do array, no caso é ProductsFromMenu.class */
             List<ProductsFromMenu> products;
             ProductsFromMenu[] productsArray = menu.getProductsList();
             if(productsArray != null) {
                 products = Utils.arrayToArrayList(ProductsFromMenu.class, productsArray);
             } else {
                 products = new ArrayList<ProductsFromMenu>();
                 products.add(new ProductsFromMenu());
             }
 
             MyTableModel<ProductsFromMenu> tableModel = new ProductsTableModel(products);
             tableModel.setTable(grid);
             return tableModel;
         } catch (Exception ex) {
             Logger.getLogger(FrmMenu.class.getName()).log(Level.SEVERE, null, ex);
             return null;
         }
     }
     
     private void gridSearch(int columnIndex) {
         if(columnIndex != 0) { return; }
         MyTableModel tableModel = ((MyTableModel)grid.getModel());
         FrmProductsSearch search = new FrmProductsSearch();
         search.setVisible(true);
         try {
             ProductsFromMenu product = new ProductsFromMenu();
             product.setProduct((Products)search.getReturnedObject());
             tableModel.findDuplicated(product, tableModel.getRowCount() - 1);
             tableModel.setObject(tableModel.getRowCount() - 1, product);
             enableSaveAndNew();
         } catch (Exception ex) {
             if(ex.getMessage().equals("Duplicated Entry")) {
                 Utils.showErrorMessage(FrmMenu.this, "Registro duplicado");
             }
             Logger.getLogger(FrmCustomers.class.getName()).log(Level.SEVERE, null, ex);
         }
     }
     
     private class ProductsTableModel extends MyTableModel<ProductsFromMenu> {
         
         public ProductsTableModel(List<ProductsFromMenu> list) throws Exception {
             super(list);
         }
         
         @Override
         public int getColumnSize(int columnIndex) {
             int size = 0;
             switch(columnIndex) {
                 case 0: size = 90; break;
                 default: size = -1; break;
             }
             return size;
         }
 
         public int getColumnCount() {
             return 2;
         }
 
         @Override
         public String getColumnName(int columnIndex) {
             switch(columnIndex) {
                 case 0: return "Cód. Produto";
                 default: return "Descrição dos Produtos";
             }
         }
 
         @Override
         public Class<?> getColumnClass(int columnIndex) {
             switch(columnIndex) {
                 case 0: return Integer.class;
                 default: return String.class;
             }
         }
 
         @Override
         public boolean isCellEditable(int rowIndex, int columnIndex) {
             switch(columnIndex) {
                 case 0: return true;
                 case 1: return false;
                 default: throw new IndexOutOfBoundsException();
             }
         }
 
         public Object getValueAt(int rowIndex, int columnIndex) {
             ProductsFromMenu productFromMenu = getObject(rowIndex);
             if(productFromMenu.getProduct() == null) {
                 return null;
             }
             switch(columnIndex) {
                 case 0: 
                     try {
                         if(grid.getRowCount() - 1 == rowIndex) {
                             addRow(new ProductsFromMenu());
                             this.fireTableDataChanged();
                         }
                         return productFromMenu.getProduct().getId();
                     } catch (Exception ex) {
                         Logger.getLogger(FrmMenu.class.getName()).log(Level.SEVERE, null, ex);
                         return null;
                     }
                 default: return productFromMenu.getProduct().getName();
             }
         }
 
         @Override
         public void setValueAt(Object aValue, int rowIndex, int columnIndex) {
             if("".equals(aValue)) { return; }
             ProductsFromMenu productFromMenu = getObject(rowIndex);
             switch(columnIndex) {
                 case 0: 
                     try {
                         productFromMenu.setProduct(new ProductsController().findById((Integer)aValue));
                         setValueAt(productFromMenu.getProduct().getName(), rowIndex, columnIndex + 1);
                         this.fireTableRowsUpdated(rowIndex, rowIndex);
                         if(grid.getRowCount() - 1 == rowIndex) {
                             addRow(new ProductsFromMenu());
                             enableSaveAndNew();
                             this.fireTableDataChanged();
                         }
                         findDuplicated(productFromMenu, rowIndex);
                     } catch (Exception ex) {
                         Logger.getLogger(FrmMenu.class.getName()).log(Level.SEVERE, null, ex);
                         if(ex.getMessage().equals("Duplicated Entry")) {
                             Utils.showErrorMessage(FrmMenu.this, "Registro duplicado");
                             return;
                         }
                         Utils.showErrorMessage(FrmMenu.this, "Registro não encontrado");
                     }
                     break;
                 default: break;
             }
         }
 
         @Override
         public boolean findDuplicated(ProductsFromMenu newItem, int rowIndex) throws Exception {
             for(int i = 0; (getList() != null && i < getList().size()); i++) 
             {
                 if(i != rowIndex && getList().get(i) != null && 
                         getList().get(i).getProduct() != null && 
                         getList().get(i).getProduct().getId() == newItem.getProduct().getId()) {
                     getList().remove(getObject(rowIndex));
                     this.fireTableDataChanged();
                     throw new Exception("Duplicated Entry");
                 }
             }
             return false;
         }
     }
 }
